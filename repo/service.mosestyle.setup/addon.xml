<?xml version="1.0" encoding="UTF-8"?>
<addon id="service.mosestyle.config"
       name="Mosestyle First-Run Config"
       version="1.0.4"
       provider-name="Mosestyle">
  <requires>
    <import addon="xbmc.python" version="3.0.0"/>
  </requires>

  <extension point="xbmc.service" library="service.py" start="startup" />

  <extension point="xbmc.addon.metadata">
    <summary>Applies Mosestyle GUI preferences on first start after install</summary>
    <description>Runs once, applies settings via JSON-RPC with retries, then performs a one-time clean restart to flush guisettings.xml and disables itself.</description>
    <platform>all</platform>
    <news>
      [1.0.4] More settle time, multi-retry writes, and a one-time safe RestartApp after applying at least one setting to ensure settings persist even if user exits with a crash.
    </news>
  </extension>
</addon>
